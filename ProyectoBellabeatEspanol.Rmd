---
title: "ProyectoBellabeat2"
author: "Beatriz Llamazares"
date: "2023-03-07"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introducción sobre Bellabeat

Bellabeat tiene diferentes productos enfocados en la salud para mujeres. El siguiente análisis se centrará en la app de Bellabeat, así como en cómo mejorar el marketing para conocer más a los clientes actuales y potenciales.
## Preguntas
* ¿Cómo usan este dispositivo los usuarios de datos de seguimiento de actividad física?

* ¿Cómo nos ayuda esta información a mejorar la estrategia de marketing de Bellabeat?

* ¿Qué mejoras puede tener la app Bellabeat?

## Preparando los datos

### Lectura de los archivos que se utilizarán
Para este proyecto, los datos utilizados serán [FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)
```{r}
daily_activity <- read.csv("C:/Users/USUARIO/Documents/Analisis_de_datos/analisis_datos_google/Curso8/FitabaseData/dailyActivity_merged.csv")
heartrate_seconds <- read.csv("C:/Users/USUARIO/Documents/Analisis_de_datos/analisis_datos_google/Curso8/FitabaseData/heartrate_seconds_merged.csv")
sleep_day <- read.csv("C:/Users/USUARIO/Documents/Analisis_de_datos/analisis_datos_google/Curso8/FitabaseData/sleepDay_merged.csv")
weight_log_info <- read.csv("C:/Users/USUARIO/Documents/Analisis_de_datos/analisis_datos_google/Curso8/FitabaseData/weightLogInfo_merged.csv")
```
### Configuración del entorno para la limpieza de datos
```{r}
install.packages("tidyverse", repos = "https://ftp.cixug.es/CRAN/")
install.packages("here", repos = "https://ftp.cixug.es/CRAN/")
install.packages("skimr", repos = "https://ftp.cixug.es/CRAN/")
install.packages("janitor", repos = "https://ftp.cixug.es/CRAN/")
install.packages("dplyr", repos = "https://ftp.cixug.es/CRAN/")
install.packages("lubridate", repos = "https://ftp.cixug.es/CRAN/")
install.packages("rmarkdown", repos = "https://ftp.cixug.es/CRAN/")
install.packages("ggplot2", repos = "https://ftp.cixug.es/CRAN/")
```
```{r}
library(tidyverse)
library(here)
library(skimr)
library(janitor)
library(dplyr)
library(lubridate)
library(ggplot2)
library(rmarkdown)
```
### Mirando los datos
Primero, para conocer nuestros datos, comenzaré a usar la función glimpse. Nos dirá el nombre de las columnas y su tipo de dato.
```{r}
glimpse(daily_activity)
glimpse(heartrate_seconds)
glimpse(sleep_day)
glimpse(weight_log_info)
```
A continuación, usaré el la función head para ver el inicio de cada tabla.
```{r}
head(daily_activity)
head(heartrate_seconds)
head(sleep_day)
head(weight_log_info)
```
### Limpiar y renombrar nombres de columnas
```{r}
daily_activity <- clean_names(daily_activity)
heartrate_seconds <- clean_names(heartrate_seconds)
sleep_day <- clean_names(sleep_day)
weight_log_info <- clean_names(weight_log_info)
```
```{r}
sleep_day <- rename(sleep_day, date = sleep_day)
```
### Ordenando los datos
```{r}
daily_activity <- daily_activity %>% arrange(id)
heartrate_seconds <- heartrate_seconds %>% arrange(id)
sleep_day <- sleep_day %>% arrange(id)
weight_log_info <- weight_log_info %>% arrange(id)
```
### Convirtiendo una variable
Me di cuenta de que la variable fecha es un tipo de cadena en cada tabla. Voy a cambiarlo a tipo fecha
```{r}
daily_activity$activity_date <- mdy(daily_activity$activity_date)
heartrate_seconds$time <- mdy_hms(heartrate_seconds$time)
sleep_day$date <- mdy_hms(sleep_day$date)
weight_log_info$date <- mdy_hms(weight_log_info$date)
```
### Fechas
A continuación, voy a explorar el intervalo de fechas.
```{r}
daily_activity %>% group_by(id) %>%  
  summarize(start_date = min(activity_date), end_date = max(activity_date))
heartrate_seconds %>% group_by(id) %>% 
  summarize(start_date = min(time), end_date = max(time))
sleep_day %>%  group_by(id) %>% 
  summarize(start_date = min(date), end_date = max(date))
weight_log_info %>% group_by(id) %>% 
  summarize(start_date = min(date), end_date = max(date))
```
Tenemos datos de aproximadamente un mes.

## Análisis de los datos
* ¿Cuál es la relación entre pasos totales y minutos sedentarios?
```{r}
ggplot(data=daily_activity, aes(x=total_steps, y=sedentary_minutes)) + geom_point(alpha=0.8, color="purple") + 
  labs(title= "Relationship between total steps and sedentary minutes",
       x = "Total steps", y = "Sedentary minutes")
```
El gráfico muestra que no hay correlación entre estas variables.

* Relación entre el total de minutos dormidos y el tiempo total en la cama
```{r}
ggplot(data=sleep_day, aes(x = total_minutes_asleep, y=total_time_in_bed)) + geom_point(alpha=0.8, color="purple") + 
  labs(title= "Relationship between total minutes asleep and total time in bed",
       x = "Total minutes asleep", y = "Total time in bed")
```
Podemos ver una correlación positiva.

* Comparativa entre los tres tipos de distancia activa con pasos totales
```{r}
ggplot(data=daily_activity, aes(x=total_steps, y =very_active_distance)) + geom_point(alpha = 0.8, color="dark green") + 
  labs(title= "Relationship between total steps and very active distance",
       x= "Total steps", y = "Very active distance")

ggplot(data=daily_activity, aes(x=total_steps, y =moderately_active_distance)) + geom_point(alpha = 0.8, color = "salmon") + 
  labs(title= "Relationship between total steps and moderately active distance",
       x= "Total steps", y= "Moderately active distance")

ggplot(data=daily_activity, aes(x=total_steps, y =light_active_distance)) + geom_point(alpha = 0.8, color= "orange") + 
  labs(title = "Relationship between total steps and light active distance",
       x= "Total steps", y="Light active distance")

```
De esta comparación podríamos concluir que los consumidores de estos productos parecen ser personas comunes y corrientes que se ejercitan de una forma más informal, teniendo en cuenta que las distancias se realizan con paso suave.

* Con la siguiente observación vemos que la mayoría de los usuarios no controlan su peso, por lo que el producto bellabeat les parece adecuado a sus necesidades, ya que cubre la actividad diaria, el sueño y el estrés
```{r}
table(weight_log_info$id)
table(heartrate_seconds$id)
```
Esto nos muestra la cantidad de veces que cada id, es decir, cada usuario, tiene datos de peso y frecuencia cardíaca.


### Fusión de dos conjuntos de datos: sleep_day y daily_activity
```{r}
combined_data <- merge(sleep_day, daily_activity, by="id")
```
Veamos cuántos participantes hay en el conjunto de datos
```{r}
n_distinct(combined_data$id)
```
Voy a usar un outer join para unir todos los id de ambas tablas.
```{r}
combined_data <- merge(sleep_day, daily_activity, by="id", all= TRUE)
```
Veamos cuantos id hay ahora
```{r}
n_distinct(combined_data$id)
```
Ahora que hemos unido ambas tablas vamos a ver relaciones entre variables

* ¿Cuál es la relación entre el total de pasos y el total de minutos dormidos?
```{r}
ggplot(combined_data, aes(x=total_steps, y=total_minutes_asleep)) + geom_smooth(color="purple") + 
  labs(title= "Relationship between total steps and total minutes asleep",
       x="Total steps",y ="Total minutes asleep")
```
Parece que las personas que duermen menos tiempo dan más pasos a lo largo del día

* ¿Cuál es la relación entre el total de pasos y el tiempo total en la cama?

```{r}
ggplot(combined_data, aes(x= total_steps, y = total_time_in_bed)) + geom_smooth(color="purple") + 
  labs(title="Relationship between total steps and total time in bed",
       x = "Total steps", y="Total time in bed")
```
Dando sentido al gráfico anterior, los usuarios que pasan menos tiempo en la cama dan más pasos

* Relación entre minutos sedentarios y minutos totales dormidos
```{r}
ggplot(combined_data, aes(x=total_minutes_asleep, y = sedentary_minutes)) + geom_smooth(color="purple") + 
  labs(title="Relationship between total minutes asleep and sedentary minutes",
       x ="Total minutes asleep", y="Sedentary minutes")
```
Aquí vemos que hay un rango en el que durmiendo entre 300 y 600 minutos, hay menos minutos sedentarios, y de ahí, cuantos más minutos dormidos, más minutos sedentarios.


### Perspectivas

## Público objetivo
En base a lo que nos dicen los datos, se puede observar que los usuarios de este tipo de aplicaciones son personas con un ritmo de vida normal. Utilizan estos dispositivos principalmente para controlar sus pasos y horas de sueño, sin embargo, no hacen mucho uso de la información de su peso.

Creo que bellabeat está pensado para un público de este estilo. Cualquiera puede usarlo y puede ser útil en su día a día.

## Camino a seguir

Respecto a la **mejora de la app**, algunas ideas son:

* Partiendo de que el mayor uso es de los pasos y las horas de sueño, la aplicación podría enviar mensajes si ve que llevas mucho tiempo sin caminar o incluso que tenga función de despertador para no gastar tanto tiempo durmiendo. Todo ello sería personalizable por el usuario en función de sus preferencias.
 
* Los usuarios no controlan demasiado su peso. Una innovación para diferenciarse de la competencia podría ser agregar a la aplicación una opción para realizar un seguimiento de las comidas e incluso hacer sugerencias para una dieta más equilibrada.


En cuanto a la **estrategia de marketing**:

* Resaltar que la app Bellabeat es una app de uso diario que te ayuda a tener más control sobre tu vida y a conocerte mejor.
 
* Dado que el público objetivo de esta empresa son las mujeres, me parece interesante realizar una campaña que destaque que esta app te ayuda a llevar un control de tu ciclo menstrual, ya que es algo que la diferencia de su competencia.


Y este es el final de este estudio de caso, gracias por su tiempo.

 
 
 
 
 
 
 
 
 
 
